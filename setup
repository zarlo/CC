write( "Connecting to server... " )

shell.run("delete", "apps/")
shell.run("delete", "nget")
shell.run("delete", "startup")

local response = http.get(
        "https://raw.githubusercontent.com/zarlo/CC/master/nget"
)
        
if response then
    local sResponse = response.readAll()
    response.close()
    local file = fs.open( "nget", "w" )
    file.write( sResponse )
    file.close()
else
    printError( "Failed." )
    return
end
print("loading CORE")
print("getting nget programs")

shell.run("nget", "get", "startup", "startup")

print("getting pastebin programs")

shell.run("pastebin", "get", "w1RtfqFd", "apps/tsmarket")

print("setting up config")

if turtle then
    type = "T"
else
	if pocket then
		type = "P"
	else
		type = "C"
	end
end	
if term.isColour() then
	advance = "A"
else
	advance = "S"
end

if type == "T" then
    print("Loading Turtle")
    shell.run("apps/tsmarket", "get", "gjdi0w", "preload", "y")
    shell.run("preload")
else
	
	print("Loading Computer")
	shell.run("apps/tsmarket", "get", "gjdi84", "apps/pearl", "y")
	if advance == "A" then
	
	
	else
	
	end
end

--settings.set(shell.allow_disk_startup, false)
--settings.save(".settings")

    local file = fs.open( "data", "w" )
    file.write( type..":"..advance )
    file.close()

os.reboot()